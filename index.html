<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Sumbul | –î–Ω–µ–≤–Ω–∏–∫ –õ—é–±–∏–º–æ–π</title>
    <style>
        :root {
            --ios-bg: #000000;
            --ios-card: rgba(20, 20, 22, 0.8);
            --ios-accent: #ff2d55;
            --ios-pink: #ff375f;
            --ios-blue: #007aff;
            --ios-green: #30d158;
            --text-main: #ffffff;
            --text-secondary: #a1a1a6;
            --blur-val: blur(10px); 
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background: var(--ios-bg);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            margin: 0; padding: 0;
            letter-spacing: -0.03em;
            overflow-x: hidden;
        }

        .bg-glow {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 0% 0%, rgba(255, 45, 85, 0.35) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(0, 122, 255, 0.3) 0%, transparent 50%);
            z-index: -1;
            filter: contrast(1.2);
        }

        header {
            padding: 65px 20px 25px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0,0,0,0.7);
            position: sticky; top: 0; z-index: 1000;
            border-bottom: 0.5px solid rgba(255,255,255,0.15);
        }

        .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
        .date-label { color: var(--ios-pink); font-size: 13px; font-weight: 800; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 4px; text-shadow: 0 0 10px rgba(255, 55, 95, 0.5); }
        h1 { margin: 0; font-size: 32px; font-weight: 900; letter-spacing: -1.5px; }

        .view-controls {
            display: flex; background: rgba(255,255,255,0.12); 
            padding: 4px; border-radius: 14px; gap: 4px;
        }
        .view-btn {
            border: none; background: transparent; color: var(--text-secondary);
            width: 44px; height: 36px; border-radius: 11px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; transition: all 0.3s ease;
        }
        .view-btn.active {
            background: var(--ios-pink); color: white;
            box-shadow: 0 0 15px rgba(255, 45, 85, 0.6);
        }

        .week-nav { 
            display: flex; justify-content: space-between; align-items: center; 
            background: rgba(255,255,255,0.08); padding: 12px 20px; border-radius: 20px;
            border: 0.5px solid rgba(255,255,255,0.1);
        }
        .nav-btn { 
            background: white; border: none; color: black; 
            width: 32px; height: 32px; border-radius: 50%; 
            font-size: 18px; font-weight: 900; box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        .week-info { text-align: center; }
        .week-num { font-size: 24px; font-weight: 900; display: block; line-height: 1; color: #fff; }
        .week-label { font-size: 10px; color: var(--text-secondary); text-transform: uppercase; font-weight: 700; }

        .container { padding: 25px 16px 150px; max-width: 600px; margin: 0 auto; }
        .day-section { margin-bottom: 40px; }
        .day-title { font-size: 26px; font-weight: 900; margin-bottom: 18px; color: #fff; text-shadow: 0 5px 15px rgba(0,0,0,0.5); }

        .card {
            background: var(--ios-card);
            border-radius: 30px; padding: 22px; margin-bottom: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative; overflow: hidden;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .card.locked { opacity: 0.3; filter: blur(10px); transform: scale(0.96); }
        .card.revealed { opacity: 1 !important; filter: none !important; transform: scale(1) !important; z-index: 10; border-color: var(--ios-pink); }
        
        body.hide-locked .card.locked:not(.revealed) { display: none; }

        .card.is-live { border-color: var(--ios-pink); box-shadow: 0 0 40px rgba(255, 45, 85, 0.35); }
        .card.is-passed { opacity: 0.3; filter: grayscale(1) blur(2px); }

        .time-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .time-text { font-size: 20px; font-weight: 800; letter-spacing: -0.5px; }

        .badge { font-size: 10px; font-weight: 900; padding: 6px 12px; border-radius: 12px; text-transform: uppercase; border: 1px solid transparent; }
        .badge-live { background: var(--ios-pink); color: white; animation: pulse 1.5s infinite; box-shadow: 0 0 15px rgba(255, 45, 85, 0.5); }
        .badge-timer { background: rgba(48, 209, 88, 0.1); color: var(--ios-green); border-color: var(--ios-green); }
        .badge-passed { background: rgba(255,255,255,0.1); color: var(--text-secondary); }
        .badge-locked { background: rgba(255,255,255,0.05); color: #fff; border-color: rgba(255,255,255,0.2); }

        .main-info { display: flex; gap: 18px; align-items: center; }
        .icon-box {
            width: 60px; height: 60px; border-radius: 20px;
            background: linear-gradient(145deg, #ff2d55, #b01a38);
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; flex-shrink: 0; 
            box-shadow: 0 10px 25px rgba(255, 45, 85, 0.4);
        }

        .details h3 { margin: 0; font-size: 19px; font-weight: 800; line-height: 1.2; margin-bottom: 4px; }
        .details p { margin: 0; font-size: 13px; color: var(--text-secondary); font-weight: 600; line-height: 1.4; }
        .room { color: var(--ios-pink); font-weight: 800; text-shadow: 0 0 8px rgba(255, 45, 85, 0.3); }

        .eye-toggle-card {
            position: absolute; right: 15px; top: 15px; z-index: 100;
            background: rgba(255,255,255,0.2); width: 42px; height: 42px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<div class="bg-glow"></div>

<header>
    <div class="header-top">
        <div>
            <div class="date-label" id="realDate">---</div>
            <h1>–î–Ω–µ–≤–Ω–∏–∫ –õ—é–±–∏–º–æ–π</h1>
        </div>
        <div class="view-controls">
            <button class="view-btn active" id="btnShowAll" onclick="setViewMode('all')">üëÅÔ∏è</button>
            <button class="view-btn" id="btnHideLocked" onclick="setViewMode('clean')">üôà</button>
        </div>
    </div>
    <div class="week-nav">
        <button class="nav-btn" onclick="changeWeek(-1)">-</button>
        <div class="week-info">
            <span class="week-label" id="weekType">–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è</span>
            <span class="week-num" id="weekNumDisplay">1</span>
        </div>
        <button class="nav-btn" onclick="changeWeek(1)">+</button>
    </div>
</header>

<div class="container" id="scheduleRoot"></div>

<script>
    const START_DATE = new Date('2026-02-09T00:00:00');
    
    const schedule = [
        { d: 1, t: "10:10 - 11:40", s: "–¢–∞—Ç–∞—Ä—Å–∫–∏–π –Ø–∑—ã–∫", r: "258, 262, 263", p: "–°–∏–±–≥–∞–µ–≤–∞ / –ù–∞–±–∏—É–ª–ª–∏–Ω–∞", w: [1,15], i: "üïå" },
        { d: 1, t: "10:10 - 11:40", s: "–û—Å–Ω. –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –¥–∏–∑–∞–π–Ω–∞", r: "262", p: "–ö—Ä–∏–Ω—Å–∫–∞—è –ó.–ê.", w: [16,17], i: "üìê" },
        { d: 2, t: "08:00 - 09:30", s: "–§–∏–∑–∏—á–µ—Å–∫–∞—è –ö—É–ª—å—Ç—É—Ä–∞", r: "–°–ö –ú–æ—Å–∫–≤–∞", p: "–®–∞–ª–∞–≤–∏–Ω–∞ –ê.–°.", w: [1,16], i: "üëü" },
        { d: 2, t: "10:10 - 11:40", s: "–ö–æ–º–ø. –∏ –¥–∏–∑–∞–π–Ω –≤ —Ä–µ–∫–ª–∞–º–µ", r: "207", p: "–ö—Ä–∏–Ω—Å–∫–∞—è –ó.–ê.", w: [1,7], i: "üé®" },
        { d: 2, t: "10:10 - 11:40", s: "–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ", r: "171", p: "–®–∞–π—Ö—É—Ç–¥–∏–Ω–æ–≤–∞ –ê.–†.", w: [8,14], i: "‚úíÔ∏è" },
        { d: 3, t: "08:30 - 10:00", s: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", r: "355 –∞–∫—Ç.–∑–∞–ª", p: "–°–∞–º–∞—Ç–æ–≤–∞ –ß.–•.", w: [1,8], i: "üìú" },
        { d: 3, t: "08:30 - 10:00", s: "–ü—Ä–æ—Ñ. –ø—Ä–∞–∫—Ç–∏–∫–∞", r: "444", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [9,17], i: "üíº" },
        { d: 3, t: "10:10 - 11:40", s: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", r: "355 –∞–∫—Ç.–∑–∞–ª", p: "–°–∞–º–∞—Ç–æ–≤–∞ –ß.–•.", w: [1,9], i: "üá∑üá∫" },
        { d: 3, t: "10:10 - 11:40", s: "–ü—Ä–æ—Ñ. –ø—Ä–∞–∫—Ç–∏–∫–∞", r: "429", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [10,17], i: "üìÇ" },
        { d: 3, t: "12:10 - 13:40", s: "–Ø–∑—ã–∫ –∏ —Å—Ç–∏–ª—å –°–ú–ò", r: "473", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [8,14], i: "‚úçÔ∏è" },
        { d: 3, t: "13:50 - 15:20", s: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –ø—Ä-–≤–∞", r: "239", p: "–®–∞–π—Ö—É—Ç–¥–∏–Ω–æ–≤ –¢.–ú.", w: [1,2], i: "üé¨" },
        { d: 3, t: "13:50 - 15:20", s: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", r: "473", p: "–ê–ª–µ—Ö–∞–Ω–¥—Ä–æ", w: [11,17], i: "üíª" },
        { d: 3, t: "17:30 - 19:00", s: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø—Ä–æ–∏–∑–≤.", r: "346", p: "–®–∞–π—Ö—É—Ç–¥–∏–Ω–æ–≤ –¢.–ú.", w: [9,14], i: "üé•" },
        { d: 3, t: "19:10 - 20:40", s: "–í–∏–¥–µ–æ–∫–æ–Ω—Ç–µ–Ω—Ç (–ü—Ä–∞–∫—Ç–∏–∫—É–º)", r: "210 / 475", p: "–Ø–º—â–∏–∫–æ–≤ –ò.–í.", w: [9,16], i: "üéûÔ∏è" },
        { d: 4, t: "08:30 - 10:00", s: "–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞", r: "475", p: "–®–∞–º—Å—É—Ç–¥–∏–Ω–æ–≤ –†.–ù.", w: [1,17], i: "üñ•Ô∏è" },
        { d: 4, t: "10:10 - 11:40", s: "PR –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏", r: "239", p: "–°–∞—Ñ–∏–Ω–∞ –õ.–ù.", w: [1,17], i: "üì¢" },
        { d: 4, t: "12:10 - 13:40", s: "–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞", r: "473", p: "–®–∞–º—Å—É—Ç–¥–∏–Ω–æ–≤ –†.–ù.", w: [11,14], i: "üñ±Ô∏è" },
        { d: 4, t: "13:50 - 15:20", s: "–≠—Å—Ç–µ—Ç–∏–∫–∞ –º–µ–¥–∏–∞", r: "346/210", p: "–ê—Ö–º–µ—Ç—à–∏–Ω–∞ –≠.–ì.", w: [3,17], i: "üé≠" },
        { d: 4, t: "15:50 - 17:20", s: "–Ø–∑—ã–∫ –∏ —Å—Ç–∏–ª—å –°–ú–ò", r: "207", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [1,5], i: "üñãÔ∏è" },
        { d: 4, t: "17:30 - 19:00", s: "–≠—Å—Ç–µ—Ç–∏–∫–∞ –ú–µ–¥–∏–∞ –ö–æ–º–º.", r: "210", p: "–ê—Ö–º–µ—Ç—à–∏–Ω–∞ –≠.–ì.", w: [3,7], i: "üí°" },
        { d: 4, t: "17:30 - 19:00", s: "–Ø–∑—ã–∫ –°–ú–ò", r: "207", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [10,15], i: "üì∞" },
        { d: 4, t: "19:10 - 20:40", s: "–ü—Ä–æ—Ñ. –ø—Ä–∞–∫—Ç–∏–∫–∞", r: "256", p: "–ê–Ω–∏—Ñ–µ—Ä–æ–≤–∞ –í.–í.", w: [1,9], i: "üíº" },
        { d: 5, t: "08:00 - 09:30", s: "–§–∏–∑–∏—á–µ—Å–∫–∞—è –ö—É–ª—å—Ç—É—Ä–∞", r: "–°–ö –ú–æ—Å–∫–≤–∞", p: "–®–∞–ª–∞–≤–∏–Ω–∞ –ê.–°.", w: [1,16], i: "üëü" },
        { d: 5, t: "10:10 - 11:40", s: "–ë—Ä–µ–Ω–¥-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏", r: "444", p: "–ú–∏—à–∞–ª–∏–Ω–∞ –ú.–ê.", w: [1,17], i: "üíé" },
        { d: 5, t: "12:10 - 13:40", s: "–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –∏ —à—Ä–∏—Ñ—Ç", r: "464 (—Å 11–Ω: 476)", p: "–°–∞—Ñ–∏–Ω–∞ –≠.–°.", w: [1,17], i: "üé®" },
        { d: 5, t: "17:30 - 19:10", s: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", r: "263", p: "–ö–∏—Å–∏–ª–µ–Ω–∫–æ –ê.–û.", w: [1,12], i: "üèõÔ∏è" },
        { d: 6, t: "08:30 - 10:00", s: "–¶–û–† –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞", r: "464", p: "–°–∞—Ñ–∏–Ω–∞ –≠.–°.", w: [1,5], i: "üíª" },
        { d: 6, t: "08:30 - 10:00", s: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –Ø–∑—ã–∫", r: "465", p: "–ë—É—Ä–ª–∞–∫–æ–≤–∞ –≠.–í.", w: [17,17], i: "üá¨üáß" },
        { d: 6, t: "12:10 - 13:40", s: "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π –Ø–∑—ã–∫", r: "464/475/476", p: "–ë—É—Ä–ª–∞–∫–æ–≤–∞ / –ü–ª–∞–Ω–∫–∏–Ω–∞", w: [1,17], i: "üåç" },
        { d: 6, t: "13:50 - 15:20", s: "–ñ–∏–≤–æ–ø–∏—Å—å", r: "171", p: "–°–∞—Ñ–∏–Ω–∞", w: [3,9], i: "üñºÔ∏è" },
        { d: 6, t: "13:50 - 15:20", s: "–§–∏–ª–æ–ª. –ë—Ä–µ–Ω–¥–∏–Ω–≥", r: "239", p: "–ë–ª–∞–≥–æ–¥–∞—Ä–æ–≤–∞ –û.–ê.", w: [10,14], i: "üìö" },
        { d: 6, t: "15:50 - 17:20", s: "–§–∏–ª–æ–ª–æ–≥–∏—è –ë—Ä–µ–Ω–¥–∏–Ω–≥–∞", r: "239", p: "–ë–ª–∞–≥–æ–¥–∞—Ä–æ–≤–∞ –û.–ê.", w: [10,13], i: "üìñ" },
        { d: 6, t: "17:30 - 19:00", s: "–§–∏–ª–æ–ª–æ–≥–∏—è –ë—Ä–µ–Ω–¥–∏–Ω–≥–∞", r: "239", p: "–ë–ª–∞–≥–æ–¥–∞—Ä–æ–≤–∞ –æ.–∞.", w: [1,9], i: "‚úíÔ∏è" },
        { d: 6, t: "17:30 - 19:00", s: "–ò–Ω—Ñ–æ—Ç–µ—Ö", r: "473", p: "–ê–ª–µ—Ö–∞–Ω–¥—Ä–æ", w: [10,17], i: "üì±" },
        { d: 6, t: "19:10 - 20:40", s: "–ò–Ω—Ñ–æ—Ç–µ—Ö (–¶–û–†)", r: "–û–Ω–ª–∞–π–Ω", p: "–ê–ª–µ—Ö–∞–Ω–¥—Ä–æ", w: [1,3], i: "‚òÅÔ∏è" }
    ];

    let realWeek = Math.floor((new Date() - START_DATE) / (1000 * 60 * 60 * 24 * 7)) + 1;
    let currentWeek = Math.max(1, Math.min(22, realWeek));

    function setViewMode(mode) {
        if (mode === 'clean') {
            document.body.classList.add('hide-locked');
            document.getElementById('btnHideLocked').classList.add('active');
            document.getElementById('btnShowAll').classList.remove('active');
        } else {
            document.body.classList.remove('hide-locked');
            document.getElementById('btnShowAll').classList.add('active');
            document.getElementById('btnHideLocked').classList.remove('active');
        }
    }

    function changeWeek(v) { 
        currentWeek = Math.max(1, Math.min(22, currentWeek + v)); 
        render(); 
    }

    function getSmartStatus(l, selWeek) {
        const now = new Date();
        const curDay = now.getDay() === 0 ? 7 : now.getDay();
        const [sh, sm] = l.t.split(' - ')[0].split(':').map(Number);
        const [eh, em] = l.t.split(' - ')[1].split(':').map(Number);

        if (selWeek < l.w[0]) return { label: `–ß–µ—Ä–µ–∑ ${l.w[0] - selWeek} –Ω–µ–¥.`, class: "badge-locked", type: 'locked' };
        if (selWeek > l.w[1]) return { label: "–ü—Ä–æ—à–ª–∞", class: "badge-passed", type: 'passed' };
        if (selWeek < realWeek) return { label: "–ü—Ä–æ—à–ª–∞", class: "badge-passed", type: 'passed' };
        if (selWeek > realWeek) return { label: "–ë—É–¥–µ—Ç", class: "badge-locked", type: 'future' };

        const st = new Date(now); st.setHours(sh, sm, 0);
        const et = new Date(now); et.setHours(eh, em, 0);

        if (curDay > l.d || (curDay === l.d && now > et)) return { label: "–ü—Ä–æ—à–ª–∞", class: "badge-passed", type: 'passed' };
        if (curDay === l.d && now >= st && now <= et) return { label: "–°–ï–ô–ß–ê–° –ò–î–ï–¢", class: "badge-live", type: 'live' };
        if (curDay === l.d && now < st) {
            const diff = st - now;
            const h = Math.floor(diff/3600000);
            const m = Math.floor((diff%3600000)/60000);
            return { label: `–ß–µ—Ä–µ–∑ ${h}—á ${m}–º`, class: "badge-timer", type: 'timer' };
        }
        return { label: `–ß–µ—Ä–µ–∑ ${l.d - curDay} –¥–Ω.`, class: "badge-timer", type: 'upcoming' };
    }

    function render() {
        const root = document.getElementById('scheduleRoot');
        document.getElementById('weekNumDisplay').innerText = currentWeek;
        document.getElementById('weekType').innerText = (currentWeek === realWeek) ? "–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è" : "–í—ã–±—Ä–∞–Ω–Ω–∞—è –Ω–µ–¥–µ–ª—è";
        
        root.innerHTML = "";
        const days = ["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞", "–°—É–±–±–æ—Ç–∞"];

        days.forEach((name, idx) => {
            const items = schedule.filter(l => l.d === idx + 1);
            if(items.length === 0) return;
            const section = document.createElement('div');
            section.className = 'day-section';
            section.innerHTML = `<div class="day-title">${name}</div>`;
            items.forEach((l, i) => {
                const status = getSmartStatus(l, currentWeek);
                const id = `card-${idx}-${i}`;
                const isLocked = status.type === 'locked';
                const card = document.createElement('div');
                card.id = id;
                card.className = `card ${isLocked ? 'locked' : ''} ${status.type === 'live' ? 'is-live' : ''} ${status.type === 'passed' ? 'is-passed' : ''}`;
                card.innerHTML = `
                    ${isLocked ? `<div class="eye-toggle-card" onclick="document.getElementById('${id}').classList.toggle('revealed')">üëÅÔ∏è</div>` : ''}
                    <div class="time-row"><span class="time-text">${l.t}</span><span class="badge ${status.class}">${status.label}</span></div>
                    <div class="main-info"><div class="icon-box">${l.i}</div><div class="details"><h3>${l.s}</h3><p>üìç <span class="room">${l.r}</span><br>üë§ ${l.p}</p></div></div>`;
                section.appendChild(card);
            });
            root.appendChild(section);
        });
        document.getElementById('realDate').innerText = new Date().toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'long' });
    }

    render();
    setInterval(render, 30000);
</script>
</body>
</html>
